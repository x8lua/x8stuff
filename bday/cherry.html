<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç”Ÿæ—¥å¿«æ¨‚ï¼Œè€å¸«ï¼</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{width:100vw;height:100vh;overflow:hidden;font-family:'Quicksand','Microsoft YaHei','PingFang SC',sans-serif;color:#fff;background:#0a0a1a}
/* BG IMAGE */
.bg-img{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;background:url('https://raw.githubusercontent.com/x8lua/x8stuff/main/bday/bg.jpeg') center 15%/cover no-repeat;opacity:.5}
/* MESH GRADIENT */
.mesh-bg{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;overflow:hidden}
.blob{position:absolute;border-radius:50%;filter:blur(100px);opacity:.35;will-change:transform}
.b1{width:50vw;height:50vw;background:#ff9a9e;top:10%;left:5%}
.b2{width:45vw;height:45vw;background:#a18cd1;top:5%;left:55%}
.b3{width:40vw;height:40vw;background:#96e6a1;top:55%;left:30%}
.b4{width:35vw;height:35vw;background:#ffecd2;top:50%;left:70%}
/* FLOATERS */
#floaters{position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:1;overflow:hidden}
.floater{position:absolute;font-size:clamp(1.2rem,2.5vw,2rem);opacity:.25;will-change:transform}
/* SLIDES */
.slide{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;visibility:hidden;opacity:0;z-index:2}
.slide.active{visibility:visible;opacity:1;z-index:3}
/* NAV */
#nav{position:fixed;bottom:32px;right:36px;display:flex;align-items:center;gap:12px;z-index:200}
#nav button{width:50px;height:50px;border-radius:50%;border:2px solid rgba(255,255,255,.25);background:rgba(255,255,255,.08);color:#fff;font-size:1.5rem;cursor:pointer;backdrop-filter:blur(12px);transition:.3s;font-family:inherit}
#nav button:hover{background:rgba(255,255,255,.2);border-color:rgba(255,255,255,.5);transform:scale(1.1)}
#nav button:disabled{opacity:.2;cursor:default;pointer-events:none}
.page-ind{color:rgba(255,255,255,.45);font-size:.9rem;font-weight:600;min-width:36px;text-align:center}
/* SLIDE 1 */
.s1-wrap{text-align:center;z-index:10}
.s1-emoji{font-size:clamp(3rem,6vw,5rem);margin-bottom:.5rem}
.s1-title{font-size:clamp(5rem,14vw,12rem);font-weight:700;background:linear-gradient(135deg,#ff9a9e,#fad0c4,#a18cd1,#96e6a1,#ffecd2);background-size:300% 300%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:gtxt 5s ease infinite;line-height:1.15;letter-spacing:.05em}
@keyframes gtxt{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.s1-name{font-size:clamp(2rem,5vw,4rem);font-weight:600;margin-top:.8rem;opacity:.85;letter-spacing:.15em}
.s1-sub{font-size:clamp(1rem,2vw,1.6rem);margin-top:1.2rem;opacity:.5;font-weight:400;letter-spacing:.2em}
.s1-credit{position:fixed;bottom:16px;left:20px;font-size:.7rem;opacity:.25;font-weight:400;z-index:200}
/* SLIDE 2 */
.s2-wrap{display:flex;align-items:center;gap:clamp(2.5rem,5vw,5rem);padding:0 7vw;max-width:1500px;width:100%;z-index:10}
.s2-photo{width:clamp(260px,28vw,420px);height:clamp(340px,36vw,540px);border-radius:30px;background:linear-gradient(135deg,#ff9a9e,#a18cd1,#96e6a1,#ffecd2);background-size:200% 200%;animation:gtxt 5s ease infinite;padding:5px;flex-shrink:0}
.s2-inner{width:100%;height:100%;border-radius:26px;background:rgba(15,15,30,.8);backdrop-filter:blur(10px);display:flex;justify-content:center;align-items:center;font-size:5rem;overflow:hidden}
.s2-inner img{width:100%;height:100%;object-fit:cover}
.s2-text{flex:1}
.s2-text h2{font-size:clamp(2.2rem,4.5vw,3.8rem);font-weight:700;margin-bottom:1.2rem;background:linear-gradient(90deg,#ff9a9e,#ffecd2,#a18cd1);background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:gtxt 4s ease infinite}
.s2-text p{font-size:clamp(1.2rem,2vw,1.7rem);line-height:1.9;opacity:.78;font-weight:400}
.s2-sig{margin-top:1.8rem;font-size:clamp(1rem,1.5vw,1.2rem);opacity:.4;font-style:italic}
/* SLIDE 3 */
#slide-3{align-items:stretch;justify-content:stretch}
#stage{position:relative;width:100vw;height:100vh}
#backdrop{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(10,10,26,.75);opacity:0;z-index:50;pointer-events:none}
.card{position:absolute;border-radius:25px;opacity:0;will-change:transform,opacity;z-index:1;overflow:hidden;background:rgba(255,255,255,.1);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1.5px solid rgba(255,255,255,.2)}
.card-label{font-weight:600;padding:8% 10% 0;font-size:clamp(.5rem,1.1vw,.8rem);opacity:.6;letter-spacing:.05em}
.card-msg{position:absolute;top:30%;left:8%;right:8%;font-weight:700;font-size:clamp(.9rem,1.8vw,1.35rem);line-height:1.35;color:#fff;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical}
.card-author{position:absolute;bottom:7%;left:10%;right:8%;font-weight:600;font-size:clamp(.5rem,1vw,.75rem);opacity:.55;display:flex;align-items:center;gap:5px}
/* FINALE */
#finale{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;pointer-events:none;opacity:0;z-index:300}
#finale h1{font-size:clamp(4rem,10vw,8rem);color:#fff;text-shadow:0 0 40px rgba(255,154,158,.6),0 0 80px rgba(161,140,209,.4)}
</style>
</head>
<body>
<!-- Background image -->
<div class="bg-img"></div>
<!-- Mesh gradient background blobs -->
<div class="mesh-bg">
  <div class="blob b1"></div><div class="blob b2"></div>
  <div class="blob b3"></div><div class="blob b4"></div>
</div>
<div id="floaters"></div>
<!-- Slide 1: Opener -->
<div id="slide-1" class="slide active">
  <div class="s1-wrap">
    <div class="s1-emoji">ğŸ‚</div>
    <h1 class="s1-title">ç”Ÿæ—¥å¿«æ¨‚</h1>
    <div class="s1-name">è¦ªæ„›çš„Cherry</div>
    <div class="s1-sub">å…¨ç­åŒå­¸ç»ä¸Šæœ€çœŸæ‘¯çš„ç¥ç¦</div>
  </div>
</div>
<!-- Slide 2: Tribute -->
<div id="slide-2" class="slide">
  <div class="s2-wrap">
    <div class="s2-photo"><div class="s2-inner"><img src="https://raw.githubusercontent.com/x8lua/x8stuff/main/bday/cherry.jpg" alt="è€å¸«"></div></div>
    <div class="s2-text">
      <h2>æœ€æ£’çš„è€å¸«</h2>
      <p>å¤šè¬ä½ ç”¨ç¬‘å®¹é™ªä¼´æˆ‘å“‹ï¼Œæ˜æ˜è‡ªå·±å¥½å®¹æ˜“è½æ·šï¼Œä»²ä¸€ç›´åŒ…å®¹ä½æˆ‘å“‹å˜…ä¸æ‡‚äº‹ï¼Œä½†ä¿‚æˆ‘å“‹å¿ƒç›®ä¸­ä½ ä¿‚æœ€éšå˜…ã€‚æˆ‘å“‹æˆæ—¥æ¬ åŠŸèª²ã€çŠ¯éŒ¯ã€æˆç¸¾å””å¤ å¥½ï¼Œä»¤æ‚¨æ“å¿ƒé›£éï¼ŒçœŸä¿‚å°å””ä½ã€‚ä»¥å¾Œæˆ‘å“‹ä¸€é½ŠåŠªåŠ›ï¼Œä¸€é½Šå‰é€²ï¼ç¥æ‚¨å¤©å¤©é–‹å¿ƒï¼Œå¹³å®‰å–œæ¨‚ï¼</p>
      <div class="s2-sig">â€” å…¨ç­åŒå­¸ æ•¬ä¸Š â™¥</div>
    </div>
  </div>
</div>
<!-- Slide 3: Card Wall -->
<div id="slide-3" class="slide"><div id="stage"></div><div id="backdrop"></div></div>
<div id="finale"><h1>ç”Ÿæ—¥å¿«æ¨‚ï¼ğŸ‚</h1></div>
<div class="s1-credit">This website was made by x8</div>
<div id="nav">
  <button id="prev-btn" disabled>â€¹</button>
  <div class="page-ind"><span id="page-num">1</span> / 3</div>
  <button id="next-btn">â€º</button>
</div>
<script>
// =============================================
// MESSAGES â€” Edit this array easily!
// =============================================
var messages = [
  {name:"åŒå­¸ 1",text:"è€å¸«ç”Ÿæ—¥å¿«æ¨‚å•¦"},{name:"åŒå­¸ 2",text:"ç¥æ‚¨å¤©å¤©é–‹å¿ƒå‘€"},
  {name:"åŒå­¸ 3",text:"æ„Ÿè¬æ‚¨ä¸€ç›´ä»¥ä¾†çš„æ•™å°"},{name:"åŒå­¸ 4",text:"æ‚¨çœŸçš„ä¿‚æœ€æ£’çš„è€å¸«"},
  {name:"åŒå­¸ 5",text:"è¬è¬è€å¸«çš„ä»˜å‡ºå‘¢"},{name:"åŒå­¸ 6",text:"ç¥æ‚¨è¬äº‹å¦‚æ„"},
  {name:"åŒå­¸ 7",text:"æ¯å ‚èª²æ‚¨éƒ½æ¿€å‹µè‘—æˆ‘å€‘"},{name:"åŒå­¸ 8",text:"è€å¸«ç”Ÿæ—¥æ„‰å¿«å‘€"},
  {name:"åŒå­¸ 9",text:"æˆ‘å€‘çœŸä¿‚å¥½æ„Ÿæ¿€æ‚¨"},{name:"åŒå­¸ 10",text:"ç¥æ‚¨å¿ƒæƒ³äº‹æˆå•¦"},
  {name:"åŒå­¸ 11",text:"ä¸Šæ‚¨çš„èª²æœ€æœ‰è¶£"},{name:"åŒå­¸ 12",text:"æ•¬æ„›çš„è€å¸« ä¹¾æ¯"},
  {name:"åŒå­¸ 13",text:"é¡˜æ‚¨æ‰€æœ‰é¡˜æœ›éƒ½æˆçœŸ"},{name:"åŒå­¸ 14",text:"æ‚¨çœŸçš„ç¨ä¸€ç„¡äºŒå‘€"},
  {name:"åŒå­¸ 15",text:"å¥½å¥½äº«å—æ‚¨çš„ç‰¹åˆ¥æ—¥å­å•¦"},{name:"åŒå­¸ 16",text:"è€å¸«æ‚¨æ”¹è®Šäº†æˆ‘çš„äººç”Ÿå‘¢"},
  {name:"åŒå­¸ 17",text:"ä¸–ç•Œä¸Šæœ€å¥½çš„è€å¸« ä¿‚æ‚¨æ²’éŒ¯"},{name:"åŒå­¸ 18",text:"å¤šè¬æ‚¨ä¸€ç›´ç›¸ä¿¡æˆ‘å€‘"},
  {name:"åŒå­¸ 19",text:"æ‚¨çš„èª²æ°¸é éƒ½ä¿‚èª²å®¤çš„äº®é»"},{name:"åŒå­¸ 20",text:"ç¥è€å¸«æœ€å¹¸ç¦çš„ç”Ÿæ—¥å•¦"},
  {name:"åŒå­¸ 21",text:"æˆ‘å€‘è¶…æ„›æ‚¨çš„èª² çœŸçš„"},{name:"åŒå­¸ 22",text:"æ‚¨å€¼å¾—æ‰€æœ‰ç”Ÿæ—¥è›‹ç³• å“ˆå“ˆ"},
  {name:"åŒå­¸ 23",text:"ç¹¼çºŒåšæœ€æ£’çš„è€å¸«å§"},{name:"åŒå­¸ 24",text:"åšæ‚¨çš„å­¸ç”ŸçœŸä¿‚è¶…å¹¸é‹"},
  {name:"åŒå­¸ 25",text:"æ´¾å°é–‹å§‹å•¦ è€å¸«ç”Ÿæ—¥å¿«æ¨‚"}
];

// Pastel glow colors for glass card borders
var GLOW_COLORS = [
  'rgba(255,154,158,.5)','rgba(161,140,209,.5)','rgba(150,230,161,.5)','rgba(255,236,210,.5)',
  'rgba(250,208,196,.5)','rgba(168,230,207,.5)','rgba(255,183,197,.5)','rgba(199,186,255,.5)',
  'rgba(162,235,222,.5)','rgba(255,218,185,.5)','rgba(200,168,255,.5)','rgba(255,200,200,.5)',
  'rgba(180,236,200,.5)','rgba(255,230,150,.5)','rgba(220,180,255,.5)','rgba(255,170,170,.5)',
  'rgba(170,220,255,.5)','rgba(255,200,230,.5)','rgba(180,255,200,.5)','rgba(255,210,160,.5)',
  'rgba(190,190,255,.5)','rgba(255,190,210,.5)','rgba(200,255,220,.5)','rgba(255,220,180,.5)',
  'rgba(210,200,255,.5)'
];

var VW = window.innerWidth, VH = window.innerHeight;

// =============================================
// MESH GRADIENT BLOB ANIMATION
// =============================================
document.querySelectorAll('.blob').forEach(function(b) {
    gsap.to(b, { x: (Math.random()-.5)*VW*.3, y: (Math.random()-.5)*VH*.3, duration: 8+Math.random()*6, repeat: -1, yoyo: true, ease: 'sine.inOut', delay: Math.random()*3 });
});

// =============================================
// FLOATING ICONS
// =============================================
var icons = ['â¤ï¸','â­','ğŸ˜Š','ğŸˆ','ğŸ','âœ¨','ğŸŒŸ','ğŸ‰','ğŸ’–','ğŸŒˆ'];
var fCont = document.getElementById('floaters');
for (var f = 0; f < 18; f++) {
    var el = document.createElement('div'); el.className = 'floater';
    el.textContent = icons[f % icons.length];
    el.style.left = Math.random()*100+'%'; el.style.top = Math.random()*100+'%';
    fCont.appendChild(el);
    gsap.to(el, { y: -(VH*(0.4+Math.random()*0.6)), x: (Math.random()-.5)*150, rotation: Math.random()*360, opacity: 0, duration: 6+Math.random()*8, repeat: -1, delay: Math.random()*6, ease: 'none' });
}

// =============================================
// SLIDE MANAGEMENT
// =============================================
var cur = 0, slides = [document.getElementById('slide-1'),document.getElementById('slide-2'),document.getElementById('slide-3')];
var busy = false, s3Init = false;
var prevBtn = document.getElementById('prev-btn'), nextBtn = document.getElementById('next-btn'), pageNum = document.getElementById('page-num');

function updNav() { prevBtn.disabled=cur===0||busy; nextBtn.disabled=cur===2||busy; pageNum.textContent=cur+1; }

function finishGo(from, to) {
    slides[from].classList.remove('active');
    gsap.set(slides[from],{visibility:'hidden',opacity:1,zIndex:2,x:0,scale:1,rotationY:0});
    // Reset inner elements of old slide
    gsap.set(slides[from].querySelectorAll('.s1-wrap,.s1-emoji,.s1-title,.s1-name,.s1-sub,.s2-photo,.s2-text,.s2-wrap'),
        {x:0,y:0,scale:1,opacity:1,rotation:0,filter:'blur(0px)'});
    slides[to].classList.add('active'); gsap.set(slides[to],{zIndex:3});
    cur=to; busy=false; updNav();
    if(to===2&&!s3Init){s3Init=true;startWall();}
}

function go(idx) {
    if (busy||idx===cur||idx<0||idx>2) return;
    busy = true;
    var from=cur, to=idx;
    slides[to].style.visibility='visible'; slides[to].style.zIndex=4;
    gsap.set(slides[to],{opacity:1,x:0,scale:1});

    // ---- Slide 1 â†’ 2 : Zoom-through ----
    if (from===0 && to===1) {
        var tl=gsap.timeline({onComplete:function(){finishGo(0,1);}});
        // Slide 1 content zooms in and blurs away
        tl.to('.s1-emoji',{scale:4,opacity:0,duration:.6,ease:'power2.in'},'<');
        tl.to('.s1-title',{scale:3,opacity:0,filter:'blur(20px)',duration:.8,ease:'power2.in'},'<');
        tl.to('.s1-name',{y:-80,opacity:0,duration:.6,ease:'power2.in'},'<.1');
        tl.to('.s1-sub',{y:60,opacity:0,duration:.5,ease:'power2.in'},'<');
        // Slide 2 elements enter
        gsap.set('.s2-photo',{x:-VW*.3,opacity:0,rotation:-8});
        gsap.set('.s2-text',{x:VW*.3,opacity:0});
        tl.to('.s2-photo',{x:0,opacity:1,rotation:0,duration:.9,ease:'back.out(1.4)'},'>.1');
        tl.to('.s2-text',{x:0,opacity:1,duration:.9,ease:'power3.out'},'<.15');
    }
    // ---- Slide 2 â†’ 1 : Reverse zoom ----
    else if (from===1 && to===0) {
        var tl=gsap.timeline({onComplete:function(){finishGo(1,0);}});
        tl.to('.s2-photo',{x:-VW*.3,opacity:0,rotation:-8,duration:.6,ease:'power2.in'},'<');
        tl.to('.s2-text',{x:VW*.3,opacity:0,duration:.6,ease:'power2.in'},'<.05');
        // Slide 1 elements re-enter
        gsap.set('.s1-emoji',{scale:3,opacity:0});
        gsap.set('.s1-title',{scale:2,opacity:0,filter:'blur(15px)'});
        gsap.set('.s1-name',{y:-60,opacity:0});
        gsap.set('.s1-sub',{y:40,opacity:0});
        tl.to('.s1-title',{scale:1,opacity:1,filter:'blur(0px)',duration:.9,ease:'back.out(1.3)'},'>.1');
        tl.to('.s1-emoji',{scale:1,opacity:1,duration:.7,ease:'elastic.out(1,.6)'},'<.1');
        tl.to('.s1-name',{y:0,opacity:1,duration:.7,ease:'power2.out'},'<.15');
        tl.to('.s1-sub',{y:0,opacity:1,duration:.6,ease:'power2.out'},'<.1');
    }
    // ---- Slide 2 â†’ 3 : Split & fly away ----
    else if (from===1 && to===2) {
        var tl=gsap.timeline({onComplete:function(){finishGo(1,2);}});
        tl.to('.s2-photo',{x:-VW*.5,opacity:0,scale:.6,rotation:-15,duration:.8,ease:'power3.in'},'<');
        tl.to('.s2-text',{x:VW*.5,opacity:0,scale:.6,duration:.8,ease:'power3.in'},'<.05');
        gsap.set(slides[2],{opacity:0,scale:1.1});
        tl.to(slides[2],{opacity:1,scale:1,duration:.7,ease:'power2.out'},'>.05');
    }
    // ---- Slide 3 â†’ 2 : Zoom out & reassemble ----
    else if (from===2 && to===1) {
        var tl=gsap.timeline({onComplete:function(){finishGo(2,1);}});
        tl.to(slides[2],{opacity:0,scale:.9,duration:.6,ease:'power2.in'});
        gsap.set('.s2-photo',{x:-VW*.4,opacity:0,rotation:-10});
        gsap.set('.s2-text',{x:VW*.4,opacity:0});
        tl.to('.s2-photo',{x:0,opacity:1,rotation:0,duration:.9,ease:'back.out(1.3)'},'>.05');
        tl.to('.s2-text',{x:0,opacity:1,duration:.9,ease:'power3.out'},'<.15');
    }
}

prevBtn.onclick=function(){go(cur-1)};
nextBtn.onclick=function(){go(cur+1)};
document.addEventListener('keydown',function(e){
    if(e.key==='ArrowRight'||e.key===' ')go(cur+1);
    if(e.key==='ArrowLeft')go(cur-1);
});

// =============================================
// SLIDE 1 â€” ENTRANCE + CONFETTI BURST
// =============================================
gsap.from('.s1-emoji',{scale:0,opacity:0,duration:1,delay:.3,ease:'elastic.out(1,.5)'});
gsap.from('.s1-title',{scale:.3,opacity:0,duration:1.2,delay:.6,ease:'back.out(1.7)'});
gsap.from('.s1-name',{y:50,opacity:0,duration:1,delay:1,ease:'power2.out'});
gsap.from('.s1-sub',{y:30,opacity:0,duration:1,delay:1.3,ease:'power2.out'});
// Confetti burst on slide 1 load
setTimeout(function(){
    confetti({particleCount:80,spread:100,origin:{x:.5,y:.5},colors:['#ff9a9e','#a18cd1','#96e6a1','#ffecd2','#fad0c4']});
},800);

// =============================================
// SLIDE 3 â€” CARD WALL + JELLY EFFECT
// =============================================
var total=messages.length, COLS=5, ROWS=Math.ceil(total/COLS);
var gapX=VW*.012, gapY=VH*.015;
var cardW=(VW-(COLS+1)*gapX)/COLS, cardH=(VH-(ROWS+1)*gapY)/ROWS;
var ctrX=(VW-cardW)/2, ctrY=(VH-cardH)/2;
var stage=document.getElementById('stage'), backdrop=document.getElementById('backdrop'), finale=document.getElementById('finale');

function gp(i){return{x:gapX+(i%COLS)*(cardW+gapX),y:gapY+Math.floor(i/COLS)*(cardH+gapY)};}

// Jelly animation function
function jellyBounce(el) {
    gsap.timeline()
        .to(el,{scaleX:1.18,scaleY:.82,duration:.1,ease:'power1.out'})
        .to(el,{scaleX:.88,scaleY:1.12,duration:.1,ease:'power1.out'})
        .to(el,{scaleX:1.08,scaleY:.92,duration:.08,ease:'power1.out'})
        .to(el,{scaleX:.96,scaleY:1.04,duration:.08,ease:'power1.out'})
        .to(el,{scaleX:1,scaleY:1,duration:.12,ease:'power2.out'});
}

var cards = messages.map(function(msg,i){
    var pos=gp(i), glow=GLOW_COLORS[i%GLOW_COLORS.length];
    var c=document.createElement('div'); c.className='card';
    c.style.cssText='width:'+cardW+'px;height:'+cardH+'px;left:'+pos.x+'px;top:'+pos.y+'px;box-shadow:0 0 20px '+glow+',inset 0 0 20px rgba(255,255,255,.03)';
    c.innerHTML='<div class="card-label">ç•™è¨€</div>'
        +'<div class="card-msg">'+msg.text+'</div>'
        +'<div class="card-author">â€” '+msg.name+'</div>';
    stage.appendChild(c);
    // Jelly on hover (only after landed)
    c.addEventListener('mouseenter',function(){
        if(c.dataset.landed) jellyBounce(c);
    });
    return {el:c,pos:pos};
});

// Sound effects
var sfxAppear = new Audio('https://raw.githubusercontent.com/x8lua/x8stuff/main/bday/swoosh.mp3');
var sfxLand = new Audio('https://raw.githubusercontent.com/x8lua/x8stuff/main/bday/swoosh2.mp3');
function playSfx(src){ var a=src.cloneNode(); a.volume=0.7; a.play(); }

function startWall(){
    var master=gsap.timeline({delay:.4});
    cards.forEach(function(item,i){
        var el=item.el,pos=item.pos;
        var ox=ctrX-pos.x,oy=ctrY-pos.y;
        var rot=(Math.random()*10-5), tl=gsap.timeline();
        gsap.set(el,{x:ox,y:oy,scale:2.5,opacity:0});

        tl.call(function(){el.style.zIndex=60; playSfx(sfxAppear);});
        tl.to(backdrop,{opacity:1,duration:.2,ease:'power1.in'},'<');
        tl.to(el,{scale:1.5,opacity:1,duration:.7,ease:'back.out(1.7)',boxShadow:'0 0 50px rgba(255,255,255,.3),0 0 20px '+GLOW_COLORS[i%GLOW_COLORS.length]});
        tl.to(el,{duration:2.5});
        tl.to(backdrop,{opacity:0,duration:.2,ease:'power1.out'});
        tl.call(function(){ playSfx(sfxLand); });
        tl.to(el,{x:0,y:0,scale:1,rotation:rot,duration:.8,ease:'back.out(2)',
            boxShadow:'0 0 20px '+GLOW_COLORS[i%GLOW_COLORS.length]+',inset 0 0 20px rgba(255,255,255,.03)',
            onComplete:function(){el.dataset.landed='1'; jellyBounce(el);}
        });
        tl.call(function(){el.style.zIndex=1;});
        master.add(tl,i>0?'-=.1':0);
    });

    // Random jelly jumps after all cards land
    master.call(function(){
        setInterval(function(){
            var ri=Math.floor(Math.random()*cards.length);
            jellyBounce(cards[ri].el);
        },2000);
    });

    // FINALE â€” confetti
    master.call(function(){
        gsap.to(finale,{opacity:1,duration:1,ease:'power2.in'});
        gsap.fromTo(finale.querySelector('h1'),{scale:.3},{scale:1,duration:1.2,ease:'elastic.out(1,.4)'});
        var end=Date.now()+5000;
        (function frame(){
            confetti({particleCount:4,angle:60,spread:80,origin:{x:0,y:.7},colors:['#ff9a9e','#a18cd1','#96e6a1','#ffecd2','#fad0c4']});
            confetti({particleCount:4,angle:120,spread:80,origin:{x:1,y:.7},colors:['#ff9a9e','#a18cd1','#96e6a1','#ffecd2','#fad0c4']});
            if(Date.now()<end)requestAnimationFrame(frame);
        })();
        setTimeout(function(){
            confetti({particleCount:200,spread:160,origin:{x:.5,y:.5},colors:['#ff9a9e','#a18cd1','#96e6a1','#ffecd2','#fad0c4','#c7b6ff']});
        },500);
    });
}
</script>
</body>
</html>
